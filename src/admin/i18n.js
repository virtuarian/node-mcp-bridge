const i18n = {
  'en': {
    'app.title': 'MCP Bridge Admin',
    'server.list': 'MCP Server List',
    'server.add': 'Add Server',
    'server.edit': 'Edit Server',
    'server.refresh': 'Refresh',
    'server.details': 'Details',
    'server.restart': 'Restart',
    'server.delete': 'Delete',
    'server.name': 'Name',
    'server.status': 'Status',
    'server.command': 'Command',
    'server.timeout': 'Timeout',
    'server.args': 'Arguments (one per line)',
    'server.enable': 'Enable/Disable',
    'server.disable': 'Disable',
    'server.actions': 'Actions',
    'server.details.title': 'Server Details: {0}',
    'server.details.basicInfo': 'Basic Information',
    'server.details.toolsList': 'Tools List',
    'server.details.environment': 'Environment Variables',
    'server.details.noTools': 'No tools available for this server',
    'server.details.noEnvVars': 'No environment variables configured',
    'server.status.connected': 'Connected',
    'server.status.connecting': 'Connecting',
    'server.status.disconnected': 'Disconnected',
    'server.enabled': 'Enabled',
    'server.disabled': 'Disabled',
    'server.seconds': 'seconds',
    'server.error': 'Error: {0}',
    'env.key': 'Key',
    'env.value': 'Value',
    'env.add': 'Add Environment Variable',
    'env.delete': 'Delete',
    'tool.name': 'Tool Name',
    'tool.description': 'Description',
    'tool.autoApprove': 'Auto Approve',
    'tool.noDescription': 'No description',
    'loading': 'Loading...',
    'empty.servers': 'No MCP servers registered',
    'button.save': 'Save',
    'button.cancel': 'Cancel',
    'button.close': 'Close',
    'button.delete': 'Delete',
    'confirm.delete': 'Are you sure you want to delete server "{0}"?',
    'confirm.title': 'Confirmation',
    'alert.update.success': 'Server "{0}" has been {1}',
    'alert.update.updated': 'updated',
    'alert.update.added': 'added',
    'alert.restart.success': 'Server "{0}" has been restarted',
    'alert.delete.success': 'Server "{0}" has been deleted',
    'alert.toggle.success': 'Server "{0}" has been {1}',
    'alert.toggle.enabled': 'enabled',
    'alert.toggle.disabled': 'disabled',
    'alert.toolToggle.success': 'Tool "{0}" auto-approval has been {1}',
    'alert.toolToggle.enabled': 'enabled',
    'alert.toolToggle.disabled': 'disabled',
    'error.serverList': 'Failed to fetch server list: {0}',
    'error.serverUpdate': 'Failed to update server: {0}',
    'error.serverRestart': 'Failed to restart server: {0}',
    'error.serverDelete': 'Failed to delete server: {0}',
    'error.toolsList': 'Failed to fetch tools list: {0}',
    'error.toolToggle': 'Failed to change tool auto-approval setting: {0}',
    'server.sessionTimeout': 'Session Timeout',
    'server.timeout.unlimited': 'Unlimited',
    'server.sessionTimeout.hint': '0 = Unlimited, blank = Default value (180 min)',
    'minutes': 'minutes',
    'server.label.name': 'Name:',
    'server.label.status': 'Status:',
    'server.label.command': 'Command:',
    'server.label.command.placeholder': 'e.g. npx',
    'server.label.args': 'Arguments:',
    'server.label.args.placeholder': 'e.g. @playwright/mcp@latest',
    'server.label.timeout': 'Timeout:',
    'server.label.state': 'State:',
    'server.args.none': 'None',
    'server.env.varName': 'Variable Name',
    'server.env.value': 'Value',
    'server.tools.name': 'Tool Name',
    'server.tools.description': 'Description',
    'server.tools.autoApprove': 'Auto Approve',
    'server.tools.noDescription': 'No description',
    'server.tools.parameters': 'Parameters',
    'server.tools.showParams': 'Show Parameters',
    'server.tools.hideParams': 'Hide Parameters',
    'server.tools.paramName': 'Name',
    'server.tools.paramType': 'Type',
    'server.tools.paramRequired': 'Required',
    'server.tools.paramDescription': 'Description',
    'server.tools.noParams': 'No parameters',
    'server.tools.yes': 'Yes',
    'server.tools.no': 'No',
    'server.tools.showMore': 'Show more',
    'server.tools.showLess': 'Show less',
  },
  'ja': {
    'app.title': 'MCP Bridge 管理画面',
    'server.list': 'MCPサーバー一覧',
    'server.add': 'サーバーを追加',
    'server.edit': 'サーバーを編集',
    'server.refresh': '更新',
    'server.details': '詳細',
    'server.restart': '再起動',
    'server.delete': '削除',
    'server.name': '名前',
    'server.status': 'ステータス',
    'server.command': 'コマンド',
    'server.timeout': 'タイムアウト',
    'server.args': '引数 (改行区切り)',
    'server.enable': '有効/無効',
    'server.disable': '無効にする',
    'server.actions': '操作',
    'server.details.title': 'サーバー詳細: {0}',
    'server.details.basicInfo': '基本情報',
    'server.details.toolsList': 'ツール一覧',
    'server.details.environment': '環境変数',
    'server.details.noTools': 'このサーバーには利用可能なツールがありません',
    'server.details.noEnvVars': '設定された環境変数はありません',
    'server.status.connected': '接続済み',
    'server.status.connecting': '接続中',
    'server.status.disconnected': '切断',
    'server.enabled': '有効',
    'server.disabled': '無効',
    'server.seconds': '秒',
    'server.error': 'エラー: {0}',
    'env.key': 'キー',
    'env.value': '値',
    'env.add': '環境変数を追加',
    'env.delete': '削除',
    'tool.name': 'ツール名',
    'tool.description': '説明',
    'tool.autoApprove': '自動承認',
    'tool.noDescription': '説明なし',
    'loading': '読み込み中...',
    'empty.servers': 'MCPサーバーが登録されていません',
    'button.save': '保存',
    'button.cancel': 'キャンセル',
    'button.close': '閉じる',
    'button.delete': '削除',
    'confirm.delete': 'サーバー "{0}" を削除してもよろしいですか？',
    'confirm.title': '確認',
    'alert.update.success': 'サーバー "{0}" を{1}しました',
    'alert.update.updated': '更新',
    'alert.update.added': '追加',
    'alert.restart.success': 'サーバー "{0}" を再起動しました',
    'alert.delete.success': 'サーバー "{0}" を削除しました',
    'alert.toggle.success': 'サーバー "{0}" を{1}にしました',
    'alert.toggle.enabled': '有効',
    'alert.toggle.disabled': '無効',
    'alert.toolToggle.success': 'ツール "{0}" の自動承認を{1}にしました',
    'alert.toolToggle.enabled': '有効',
    'alert.toolToggle.disabled': '無効',
    'error.serverList': 'サーバー一覧の取得に失敗しました: {0}',
    'error.serverUpdate': 'サーバー設定の保存に失敗しました: {0}',
    'error.serverRestart': 'サーバーの再起動に失敗しました: {0}',
    'error.serverDelete': 'サーバーの削除に失敗しました: {0}',
    'error.toolsList': 'ツール一覧の取得に失敗しました: {0}',
    'error.toolToggle': 'ツールの自動承認設定の変更に失敗しました: {0}',
    'server.sessionTimeout': 'セッションタイムアウト',
    'server.timeout.unlimited': '無制限',
    'server.sessionTimeout.hint': '0 = 無制限、空白 = デフォルト値(180分)',
    'minutes': '分',
    'server.label.name': '名前:',
    'server.label.status': 'ステータス:',
    'server.label.command': 'コマンド:',
    'server.label.command.placeholder': '例: npx',
    'server.label.args': '引数:',
    'server.label.args.placeholder': '例: @playwright/mcp@latest',
    'server.label.timeout': 'タイムアウト:',
    'server.label.state': '状態:',
    'server.args.none': 'なし',
    'server.env.varName': '変数名',
    'server.env.value': '値',
    'server.tools.name': 'ツール名',
    'server.tools.description': '説明',
    'server.tools.autoApprove': '自動承認',
    'server.tools.noDescription': '説明なし',
    'server.tools.parameters': 'パラメータ',
    'server.tools.showParams': 'パラメータを表示',
    'server.tools.hideParams': 'パラメータを非表示',
    'server.tools.paramName': '名前',
    'server.tools.paramType': '型',
    'server.tools.paramRequired': '必須',
    'server.tools.paramDescription': '説明',
    'server.tools.noParams': 'パラメータなし',
    'server.tools.yes': 'はい',
    'server.tools.no': 'いいえ',
    'server.tools.showMore': 'もっと見る',
    'server.tools.showLess': '折りたたむ',
  },
  'zh': {
    'app.title': 'MCP Bridge 管理界面',
    'server.list': 'MCP服务器列表',
    'server.add': '添加服务器',
    'server.edit': '编辑服务器',
    'server.refresh': '刷新',
    'server.details': '详情',
    'server.restart': '重启',
    'server.delete': '删除',
    'server.name': '名称',
    'server.status': '状态',
    'server.command': '命令',
    'server.timeout': '超时',
    'server.args': '参数（每行一个）',
    'server.enable': '启用/禁用',
    'server.disable': '禁用',
    'server.actions': '操作',
    'server.details.title': '服务器详情: {0}',
    'server.details.basicInfo': '基本信息',
    'server.details.toolsList': '工具列表',
    'server.details.environment': '环境变量',
    'server.details.noTools': '此服务器没有可用的工具',
    'server.details.noEnvVars': '未配置环境变量',
    'server.status.connected': '已连接',
    'server.status.connecting': '连接中',
    'server.status.disconnected': '已断开',
    'server.enabled': '已启用',
    'server.disabled': '已禁用',
    'server.seconds': '秒',
    'server.error': '错误: {0}',
    'env.key': '键',
    'env.value': '值',
    'env.add': '添加环境变量',
    'env.delete': '删除',
    'tool.name': '工具名称',
    'tool.description': '描述',
    'tool.autoApprove': '自动批准',
    'tool.noDescription': '无描述',
    'loading': '加载中...',
    'empty.servers': '未注册MCP服务器',
    'button.save': '保存',
    'button.cancel': '取消',
    'button.close': '关闭',
    'button.delete': '删除',
    'confirm.delete': '确定要删除服务器 "{0}" 吗？',
    'confirm.title': '确认',
    'alert.update.success': '服务器 "{0}" 已{1}',
    'alert.update.updated': '更新',
    'alert.update.added': '添加',
    'alert.restart.success': '服务器 "{0}" 已重启',
    'alert.delete.success': '服务器 "{0}" 已删除',
    'alert.toggle.success': '服务器 "{0}" 已{1}',
    'alert.toggle.enabled': '启用',
    'alert.toggle.disabled': '禁用',
    'alert.toolToggle.success': '工具 "{0}" 的自动批准已{1}',
    'alert.toolToggle.enabled': '启用',
    'alert.toolToggle.disabled': '禁用',
    'error.serverList': '获取服务器列表失败: {0}',
    'error.serverUpdate': '保存服务器设置失败: {0}',
    'error.serverRestart': '重启服务器失败: {0}',
    'error.serverDelete': '删除服务器失败: {0}',
    'error.toolsList': '获取工具列表失败: {0}',
    'error.toolToggle': '更改工具自动批准设置失败: {0}',
    'server.sessionTimeout': '会话超时',
    'server.timeout.unlimited': '无限制',
    'server.sessionTimeout.hint': '0 = 无限制，空白 = 默认值(180分钟)',
    'minutes': '分钟',
    'server.label.name': '名称:',
    'server.label.status': '状态:',
    'server.label.command': '命令:',
    'server.label.command.placeholder': '例如: npx',
    'server.label.args': '参数:',
    'server.label.args.placeholder': '例如: @playwright/mcp@latest',
    'server.label.timeout': '超时:',
    'server.label.state': '状态:',
    'server.args.none': '无',
    'server.env.varName': '变量名',
    'server.env.value': '值',
    'server.tools.name': '工具名称',
    'server.tools.description': '描述',
    'server.tools.autoApprove': '自动批准',
    'server.tools.noDescription': '无描述',
    'server.tools.parameters': '参数',
    'server.tools.showParams': '显示参数',
    'server.tools.hideParams': '隐藏参数',
    'server.tools.paramName': '名称',
    'server.tools.paramType': '类型',
    'server.tools.paramRequired': '必填',
    'server.tools.paramDescription': '描述',
    'server.tools.noParams': '没有参数',
    'server.tools.yes': '是',
    'server.tools.no': '否',
    'server.tools.showMore': '显示更多',
    'server.tools.showLess': '显示更少',
  }
};

// 文字列フォーマット関数
function formatString(str, ...args) {
  return str.replace(/{(\d+)}/g, (match, number) => {
    return typeof args[number] !== 'undefined' ? args[number] : match;
  });
}

// 現在の言語を取得
function getCurrentLanguage() {
  // localStorage から言語設定を取得、なければブラウザの言語を使用
  let lang = localStorage.getItem('mcp-admin-language') ||
    (navigator.language || navigator.userLanguage).substring(0, 2);

  // サポートされている言語かチェック、なければデフォルト言語（英語）を使用
  if (!i18n[lang]) {
    lang = 'en';
  }

  return lang;
}

// 言語を設定
function setLanguage(lang) {
  if (i18n[lang]) {
    localStorage.setItem('mcp-admin-language', lang);
    location.reload(); // ページを再読み込みして言語を適用
  }
}

// 指定されたキーの翻訳テキストを取得
function t(key, ...args) {
  const lang = getCurrentLanguage();
  const text = i18n[lang][key] || i18n['en'][key] || key;

  if (args.length > 0) {
    return formatString(text, ...args);
  }

  return text;
}

export { t, getCurrentLanguage, setLanguage };